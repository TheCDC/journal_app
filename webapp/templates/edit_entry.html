{% extends 'base.html' %}

{% block content %} {{super()}}
<div class="container">
    <div>
        <a href="{{context.back}}">
            <button class="btn">Back</button>
        </a>
        <h1>{{context.heading}}</h1>
    </div>
    <div>
        {% for e in context.errors %}
        <div class="alert alert-danger">
            {{e}}
        </div>
        {% endfor %}
    </div>

    <form action="{{context.action}}" method="POST" enctype="multipart/form-data">

        <div class="form-group">
            {{render_field(context.form.create_date,label='test')}}

            {{context.form.hidden_tag()}}
            <label for="contents">Entry contents</label>
            <textarea name="contents" id="contents" class="form-control entry_editor" rows="15">{{context.form.contents.data}}</textarea>
            {% if not context.create %}

            <div class="hidden">

                {{render_field(context.form.owner_id)}}
                {{render_field(context.form.id)}}

            </div>

            {% endif %}


        </div>
        <input class="btn btn-success" type="submit" value="submit">

    </form>
</div>
{% endblock %}

{% block scripts %}

{{super()}}
<script type="text/javascript">

var isodate = function(){
    var local = new Date();
    local.setMinutes(local.getMinutes() - local.getTimezoneOffset());
    return local.toJSON().slice(0,10);
}
if (document.getElementById('create_date').value.length == 0){
document.getElementById('create_date').value = isodate();

}
window.onbeforeunload = function() {
  return "Are you sure you want to navigate away?";
}


</script>
{% endblock %}
